layout: post
title: react-组件类型及使用场景
comment: true
tags: [react]
date: 2019-05-04 13:59:31
updated: 2019-05-04 13:59:31
---

------
<!-- more -->


## 函数组件 vs 类组件

### 函数组件
- 函数组件的写法要比类组件简洁，不过类组件比函数组件功能更加强大。函数组件更加专注和单一，承担的职责也更加清晰，它只是一个返回React 元素的函数，只关注对应UI的展现。函数组件接收外部传入的props，返回对应UI的DOM描述。是无状态组件；

```
  function Welcome(props) {
    return <h1>Hello, {props.name}</h1>;
  }
```

### 类组件
- 类组件可以维护自身的状态变量，即组件的state，类组件还有不同的生命周期方法，可以让开发者能够在组件的不同阶段（挂载、更新、卸载），对组件做更多的控制。

```
  class Welcome extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        show: true
      }
    }
    render() {
        const { show } = this.state;
        return (
          <>
              { show && <h1>Hello, {this.props.name}</h1> }
          </>
      )
    }
  }
```

## 下面让我们来分析一下两种实现的区别：

1. <code>更加简洁</code>:  第一眼直观的区别是，函数组件的代码量比类组件要少一些，所以函数组件比类组件更加简洁。千万不要小看这一点，对于我们追求极致的程序员来说，这依然是不可忽视的。
2. <code>无状态组件</code>: 函数组件看似只是一个返回值是DOM结构的函数，其实它的背后是无状态组件（Stateless Components）的思想。函数组件中，你无法使用State，也无法使用组件的生命周期方法，这就决定了函数组件都是展示性组件（Presentational Components），接收Props，渲染DOM，而不关注其他逻辑。
3. <code>函数组件中没有this</code>: 所以你再也不需要考虑this带来的烦恼。而在类组件中，你依然要记得绑定this这个琐碎的事情。如示例中的sayHi。
4. <code>函数组件更容易理解</code>: 当你看到一个函数组件时，你就知道它的功能只是接收属性，渲染页面，它不执行与UI无关的逻辑处理，它只是一个纯函数。而不用在意它返回的DOM结构有多复杂。
5. <code>性能</code>: 目前React还是会把函数组件在内部转换成类组件，所以使用函数组件和使用类组件在性能上并无大的差异。但是，React官方已承诺，未来将会优化函数组件的性能，因为函数组件不需要考虑组件状态和组件生命周期方法中的各种比较校验，所以有很大的性能提升空间。
6.  <code>函数组件迫使你思考最佳实践</code>: 这是最重要的一点。组件的主要职责是UI渲染，理想情况下，所有的组件都是展示性组件，每个页面都是由这些展示性组件组合而成。如果一个组件是函数组件，那么它当然满足这个要求。所以牢记函数组件的概念，可以让你在写组件时，先思考这个组件应不应该是展示性组件。更多的展示性组件意味着更多的组件有更简洁的结构，更多的组件能被更好的复用。
